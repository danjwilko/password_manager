{% extends "password_manager/base.html" %}
{% load django_bootstrap5 %}

{% block page_header %}
    <h2 class="h2">Credential Details</h2>
{% endblock page_header %}

{% block content %}
<div class="container bg-light mb-2 p-3 rounded-1 shadow-sm">
    <ul class="list-group pb-2">
        <li class="list-group-item border-0">Site: {{ credential.site_name }}</li>
        <li class="list-group-item border-0">Username: {{ credential.username }}</li>
        <li class="list-group-item border-0">Password:
            <input type="password" id="password" value="{{ decrypted_password }}" readonly>
        </li>
    </ul>
    <div class="btn-group" role="group" aria-label="Password Actions">
        {% bootstrap_button button_type="button" content="Show Password" id="toggleButton" onclick="togglePassword()" %}
        {% bootstrap_button button_type="button" content="Copy to Clipboard" onclick="copyToClipboard()" %}
    </div>
</div>
    </ul>
    <div class="btn-group" role="group" aria-label="Credential Actions">
    <button type="button" class="btn btn-warning m-1" onclick="location.href='{% url 'password_manager:edit_credential' credential.id %}'">Edit Credential</button>
    <button type="button" class="btn btn-danger m-1" onclick="location.href='{% url 'password_manager:delete_credential' credential.id %}'">Delete Credential</button>
</div>
</div>
    <hr class="m-2">
    <button type="button" class="btn btn-primary" onclick="location.href='{% url 'password_manager:credential' %}'">Back to Credentials</button>

    <script>
        function togglePassword() {
            const passwordField = document.getElementById('password');
            const toggleButton = document.getElementById('toggleButton');
            if (passwordField.type === 'password') {
                passwordField.type = 'text';
                toggleButton.textContent = 'Hide Password';
            } else {
                passwordField.type = 'password';
                toggleButton.textContent = 'Show Password';
            }
        }
        function copyToClipboard() {
            const passwordField = document.getElementById('password');
            navigator.clipboard.writeText(passwordField.value).then(() => {
                alert('Password copied to clipboard');
            });
        }
    </script>
{% endblock content %}